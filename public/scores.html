<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Live Scores & Results - AllSports</title>
  <meta name="description" content="Live sports scores, results, and match updates from all major leagues and tournaments."/>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* All the CSS styles from the previous code remain the same */
    .ticker {
      background: linear-gradient(135deg, var(--accent) 0%, #d32f2f 100%);
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      margin-bottom: var(--space-4);
      display: flex;
      align-items: center;
      gap: var(--space-3);
      box-shadow: 0 4px 12px rgba(232, 29, 47, 0.3);
    }
    
    .ticker .label {
      background: rgba(0,0,0,0.3);
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .ticker .marquee {
      flex: 1;
      overflow: hidden;
      position: relative;
    }
    
    .marquee-inner {
      white-space: nowrap;
      animation: marquee 30s linear infinite;
      font-weight: 500;
    }
    
    @keyframes marquee {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    
    .ticker .meta {
      font-size: 12px;
      opacity: 0.9;
    }
    
    .advanced-filters {
      display: flex;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
      flex-wrap: wrap;
      align-items: end;
    }
    
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: var(--space-1);
    }
    
    .filter-group label {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .filter-select {
      padding: 10px 16px;
      border-radius: var(--radius);
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.15);
      color: var(--text-primary);
      font-size: 14px;
      font-family: inherit;
      transition: all 0.3s ease;
      cursor: pointer;
      min-width: 160px;
    }
    
    .filter-select:hover {
      border-color: rgba(255, 255, 255, 0.25);
      background: rgba(255, 255, 255, 0.12);
    }
    
    .filter-select:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(232, 29, 47, 0.2);
    }
    
    .scores-main {
      padding: var(--space-4) 0;
    }
    
    .scores-section {
      margin-bottom: var(--space-4);
    }
    
    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .section-title {
      font-size: 28px;
      margin: 0;
      color: var(--text-primary);
      position: relative;
      padding-left: 12px;
    }
    
    .section-title::before {
      content: '';
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 4px;
      height: 24px;
      background: var(--accent);
      border-radius: 2px;
    }
    
    .live-count, .date-filter, .time-range {
      background: rgba(255, 255, 255, 0.08);
      padding: 6px 12px;
      border-radius: var(--radius);
      font-size: 14px;
      color: var(--text-secondary);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .live-count {
      color: var(--accent);
      border-color: var(--accent);
      background: rgba(232, 29, 47, 0.1);
    }
    
    .scores-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: var(--space-3);
    }
    
    .match-card {
      background: var(--card);
      border-radius: var(--radius);
      border: 1px solid rgba(255,255,255,0.1);
      padding: var(--space-3);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }
    
    .match-card:hover {
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.2);
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
    }
    
    .match-card.live {
      border-left: 4px solid var(--accent);
    }
    
    .match-card.finished {
      border-left: 4px solid #4CAF50;
    }
    
    .match-card.upcoming {
      border-left: 4px solid #FF9800;
    }
    
    .match-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-2);
    }
    
    .match-sport {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
      color: var(--text-secondary);
      font-weight: 500;
    }
    
    .match-status {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      font-weight: 600;
      padding: 4px 10px;
      border-radius: 12px;
    }
    
    .match-status.live {
      background: rgba(232, 29, 47, 0.15);
      color: var(--accent);
    }
    
    .match-status.finished {
      background: rgba(76, 175, 80, 0.15);
      color: #4CAF50;
    }
    
    .match-status.upcoming {
      background: rgba(255, 152, 0, 0.15);
      color: #FF9800;
    }
    
    .live-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s infinite;
    }
    
    @keyframes pulse {
      0% { opacity: 1; }
      50% { opacity: 0.5; }
      100% { opacity: 1; }
    }
    
    .match-competition {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: var(--space-3);
      font-weight: 500;
    }
    
    .match-teams {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }
    
    .team {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .team-info {
      display: flex;
      align-items: center;
      gap: var(--space-2);
    }
    
    .team-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255,255,255,0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 10px;
      color: white;
      flex-shrink: 0;
      border: 1px solid rgba(255,255,255,0.2);
    }
    
    .team-name {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .team-score {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }
    
    .match-details {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
      font-size: 13px;
      color: var(--text-secondary);
    }
    
    .match-details div {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    
    .match-actions {
      display: flex;
      gap: var(--space-2);
    }
    
    .match-actions .btn-small {
      flex: 1;
      text-align: center;
      justify-content: center;
    }
    
    /* Enhanced Follow and Reminder button transitions */
    .follow-btn, .reminder-btn {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    
    .follow-btn .btn-text,
    .reminder-btn .btn-text {
      display: block;
      transition: all 0.3s ease;
    }
    
    .follow-btn .hover-text,
    .reminder-btn .hover-text {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: translateY(100%);
      transition: all 0.3s ease;
    }
    
    .follow-btn.followed {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }
    
    .follow-btn.followed:hover {
      background: #d32f2f;
      border-color: #d32f2f;
    }
    
    .follow-btn.followed:hover .btn-text {
      opacity: 0;
      transform: translateY(-100%);
    }
    
    .follow-btn.followed:hover .hover-text {
      opacity: 1;
      transform: translateY(0);
    }
    
    .reminder-btn.reminder-set {
      background: #4CAF50;
      color: white;
      border-color: #4CAF50;
    }
    
    .reminder-btn.reminder-set:hover {
      background: #388E3C;
      border-color: #388E3C;
    }
    
    .reminder-btn.reminder-set:hover .btn-text {
      opacity: 0;
      transform: translateY(-100%);
    }
    
    .reminder-btn.reminder-set:hover .hover-text {
      opacity: 1;
      transform: translateY(0);
    }
    
    /* Toast notification styles */
    .toast {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: var(--accent);
      color: white;
      padding: 12px 20px;
      border-radius: var(--radius);
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      z-index: 1000;
      transform: translateY(100px);
      opacity: 0;
      transition: all 0.3s ease;
    }
    
    .toast.show {
      transform: translateY(0);
      opacity: 1;
    }
    
    /* Modal styles */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    
    .modal.active {
      opacity: 1;
      visibility: visible;
    }
    
    .modal-content {
      background: var(--card);
      border-radius: var(--radius);
      width: 90%;
      max-width: 800px;
      max-height: 90vh;
      overflow-y: auto;
      position: relative;
      transform: translateY(30px);
      transition: transform 0.3s ease;
    }
    
    .modal.active .modal-content {
      transform: translateY(0);
    }
    
    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: var(--space-4);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .modal-title {
      font-size: 24px;
      margin: 0;
      color: var(--text-primary);
    }
    
    .modal-close {
      background: none;
      border: none;
      color: var(--text-secondary);
      font-size: 24px;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.3s ease;
    }
    
    .modal-close:hover {
      background: rgba(255,255,255,0.1);
      color: var(--text-primary);
    }
    
    .modal-body {
      padding: var(--space-4);
    }
    
    /* Stats modal styles */
    .stats-container {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap: var(--space-3);
      margin-bottom: var(--space-4);
    }
    
    .stat-item {
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      padding: var(--space-3);
      text-align: center;
    }
    
    .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: var(--accent);
      margin-bottom: var(--space-1);
    }
    
    .stat-label {
      font-size: 14px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    .team-stats {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-3);
    }
    
    .team-stat {
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      padding: var(--space-3);
    }
    
    .team-stat-header {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }
    
    .team-stat-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .stat-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }
    
    .stat-row {
      display: flex;
      justify-content: space-between;
      padding-bottom: var(--space-2);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .stat-name {
      color: var(--text-secondary);
    }
    
    .stat-value-team {
      color: var(--text-primary);
      font-weight: 600;
    }
    
    /* Highlights modal styles */
    .video-container {
      position: relative;
      padding-bottom: 56.25%; /* 16:9 aspect ratio */
      height: 0;
      overflow: hidden;
      border-radius: var(--radius);
      margin-bottom: var(--space-4);
    }
    
    .video-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border: none;
    }
    
    .match-summary {
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      padding: var(--space-3);
      margin-bottom: var(--space-4);
    }
    
    .summary-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }
    
    .summary-text {
      color: var(--text-secondary);
      line-height: 1.6;
    }
    
    /* Preview modal styles */
    .preview-teams {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-4);
      margin-bottom: var(--space-4);
    }
    
    .preview-team {
      background: rgba(255,255,255,0.05);
      border-radius: var(--radius);
      padding: var(--space-3);
    }
    
    .preview-team-header {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
      padding-bottom: var(--space-2);
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    
    .preview-team-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .coach-info {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      margin-bottom: var(--space-3);
    }
    
    .coach-label {
      color: var(--text-secondary);
      font-size: 14px;
    }
    
    .coach-name {
      color: var(--text-primary);
      font-weight: 600;
    }
    
    .lineup-section {
      margin-bottom: var(--space-3);
    }
    
    .lineup-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: var(--space-2);
    }
    
    .player-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-2);
    }
    
    .player-item {
      display: flex;
      align-items: center;
      gap: var(--space-2);
      padding: 6px 0;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .player-number {
      background: var(--accent);
      color: white;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      font-weight: 600;
    }
    
    .player-name {
      color: var(--text-primary);
    }
    
    .player-position {
      color: var(--text-secondary);
      font-size: 12px;
      margin-left: auto;
    }
    
    /* Search Results Dropdown */
    .search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      z-index: 1000;
      max-height: 300px;
      overflow-y: auto;
      display: none;
      margin-top: 8px;
      border: 1px solid rgba(255,255,255,0.1);
    }
    
    .search-results.active {
      display: block;
    }
    
    .search-result-item {
      padding: 12px 16px;
      cursor: pointer;
      transition: background 0.2s ease;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .search-result-item:hover {
      background: rgba(255,255,255,0.05);
    }
    
    .search-result-item:last-child {
      border-bottom: none;
    }
    
    .search-result-header {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }
    
    .search-result-sport {
      font-size: 12px;
      color: var(--text-secondary);
    }
    
    .search-result-title {
      font-weight: 600;
      color: var(--text-primary);
    }
    
    .search-result-details {
      font-size: 13px;
      color: var(--text-secondary);
    }
    
    .no-results {
      text-align: center;
      padding: var(--space-4);
      color: var(--text-secondary);
    }
    
    .no-results h3 {
      margin-bottom: var(--space-2);
      color: var(--text-primary);
    }

    .loading {
      text-align: center;
      padding: var(--space-4);
      color: var(--text-secondary);
    }
    
    .loading-spinner {
      border: 3px solid rgba(255,255,255,0.3);
      border-radius: 50%;
      border-top: 3px solid var(--accent);
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto var(--space-3);
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    @media (max-width: 768px) {
      .scores-grid {
        grid-template-columns: 1fr;
      }
      
      .advanced-filters {
        flex-direction: column;
      }
      
      .filter-select {
        min-width: 100%;
      }
      
      .match-details {
        grid-template-columns: 1fr;
      }
      
      .ticker {
        flex-direction: column;
        gap: var(--space-2);
        text-align: center;
      }
      
      .stats-container {
        grid-template-columns: 1fr;
      }
      
      .team-stats {
        grid-template-columns: 1fr;
      }
      
      .preview-teams {
        grid-template-columns: 1fr;
      }
    }
  </style>

</head>
<body>
<!-- Top Color Strip -->
<div class="top-strip" aria-hidden="true"></div>

<!-- Header -->
<<!-- Header -->
<header class="site-header" role="banner" id="siteHeader">
  <div class="header-inner">
    <a class="brand" href="/" aria-label="AllSports home">
      <div class="logo">
        <img src="https://i.pinimg.com/736x/1a/03/15/1a0315e084288700eaf5451d53aeffad.jpg" alt="AllSports Logo">
      </div>
      <div class="brand-text">
        <h1>AllSports</h1>
        <p>Latest sports news & live updates</p>
      </div>
    </a>

    <!-- Main Navigation -->
    <nav class="main-nav" role="navigation" aria-label="Primary navigation">
      <ul class="nav-list" role="menubar">
        <li role="none">
          <a role="menuitem" href="index.html" class="nav-link">Home</a>
        </li>
        
        <!-- Sports Dropdown -->
        <li role="none" class="has-dropdown" aria-haspopup="true">
          <button class="nav-link nav-button" aria-controls="sportsMenu" aria-haspopup="true" aria-expanded="false">
            Sports <span class="caret">‚ñæ</span>
          </button>
          <div id="sportsMenu" class="dropdown sports-dropdown" role="menu" aria-hidden="true">
            <div class="dropdown-grid" role="group" aria-label="Sports list">
              <a role="menuitem" href="games/football.html" class="dropdown-item">
                <span class="sport-icon">‚öΩ</span> Football
              </a>
              <a role="menuitem" href="games/cricket.html" class="dropdown-item">
                <span class="sport-icon">üèè</span> Cricket
              </a>
              <a role="menuitem" href="games/basketball.html" class="dropdown-item">
                <span class="sport-icon">üèÄ</span> Basketball
              </a>
              <a role="menuitem" href="games/tennis.html" class="dropdown-item">
                <span class="sport-icon">üéæ</span> Tennis
              </a>
              <a role="menuitem" href="games/baseball.html" class="dropdown-item">
                <span class="sport-icon">‚öæ</span> Baseball
              </a>
              <a role="menuitem" href="games/hockey.html" class="dropdown-item">
                <span class="sport-icon">üèí</span> Hockey
              </a>
              <a role="menuitem" href="games/golf.html" class="dropdown-item">
                <span class="sport-icon">‚õ≥</span> Golf
              </a>
              <a role="menuitem" href="games/rugby.html" class="dropdown-item">
                <span class="sport-icon">üèâ</span> Rugby
              </a>
              <a role="menuitem" href="games/formula1.html" class="dropdown-item">
                <span class="sport-icon">üèéÔ∏è</span> Formula 1
              </a>
              <a role="menuitem" href="games/boxing.html" class="dropdown-item">
                <span class="sport-icon">ü•ä</span> Boxing
              </a>
              <a role="menuitem" href="games/mma.html" class="dropdown-item">
                <span class="sport-icon">ü•ã</span> MMA
              </a>
              <a role="menuitem" href="games/olympics.html" class="dropdown-item">
                <span class="sport-icon">üèÖ</span> Olympics
              </a>
            </div>
          </div>
        </li>

        <li role="none">
          <a role="menuitem" href="scores.html" class="nav-link nav-active" aria-current="page">Scores</a>
        </li>

        <li role="none">
          <a role="menuitem" href="watch.html" class="nav-link">Watch</a>
        </li>

        <li role="none">
          <a role="menuitem" href="teams.html" class="nav-link">Teams</a>
        </li>

         <li role="none">
          <a role="menuitem" href="players.html" class="nav-link">Players</a>
        </li>


        <li role="none">
          <a role="menuitem" href="fixtures.html" class="nav-link">Fixtures</a>
        </li>

         <!-- Profile Link -->
        <li role="none">
          <a role="menuitem" href="profile.html" class="nav-link nav-active" aria-current="page">Profile</a>
        </li>
      </ul>
    </nav>
      </ul>
    </nav>

    <!-- Search and User Area -->
    <div class="header-actions">
      <div class="search" role="search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input 
          id="searchInput" 
          placeholder="Search matches, teams..." 
          aria-label="Search matches"
          type="text"
        >
        <div class="search-results" id="searchResults"></div>
      </div>
      
      <!-- User menu -->
      <div class="user-menu">
        <button class="btn btn-login" id="loginBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <span id="loginText">Login</span>
        </button>
        <div class="user-dropdown" id="userDropdown">
          <a href="#" id="logoutBtn">Sign Out</a>
        </div>
      </div>
    </div>

    <!-- Mobile Hamburger -->
    <button id="mobileToggle" class="hamburger" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>

  <!-- Mobile Navigation Panel -->
  <div id="mobileMenu" class="mobile-panel" aria-hidden="true" role="dialog" aria-label="Mobile navigation">
    <div class="mobile-panel-header">
      <div class="brand">
        <div class="logo">
          <img src="https://i.pinimg.com/736x/1a/03/15/1a0315e084288700eaf5451d53aeffad.jpg" alt="AllSports Logo">
        </div>
        <div class="brand-text">
          <h2>AllSports</h2>
        </div>
      </div>
      <button class="mobile-close" aria-label="Close menu">‚úï</button>
    </div>
    
    <nav class="mobile-nav" role="navigation" aria-label="Mobile navigation">
      <ul class="mobile-nav-list">
        <li><a href="index.html" class="mobile-nav-link">Home</a></li>
        
        <li class="mobile-dropdown">
          <button class="mobile-nav-link mobile-nav-button" aria-expanded="false">
            Sports <span class="mobile-caret">‚ñæ</span>
          </button>
          <div class="mobile-dropdown-menu" aria-hidden="true">
            <a href="games/football.html" class="mobile-dropdown-item">‚öΩ Football</a>
            <a href="games/cricket.html" class="mobile-dropdown-item">üèè Cricket</a>
            <a href="games/basketball.html" class="mobile-dropdown-item">üèÄ Basketball</a>
            <a href="games/tennis.html" class="mobile-dropdown-item">üéæ Tennis</a>
            <a href="games/baseball.html" class="mobile-dropdown-item">‚öæ Baseball</a>
            <a href="games/hockey.html" class="mobile-dropdown-item">üèí Hockey</a>
            <a href="games/golf.html" class="mobile-dropdown-item">‚õ≥ Golf</a>
            <a href="games/rugby.html" class="mobile-dropdown-item">üèâ Rugby</a>
            <a href="games/formula1.html" class="mobile-dropdown-item">üèéÔ∏è Formula 1</a>
            <a href="games/boxing.html" class="mobile-dropdown-item">ü•ä Boxing</a>
            <a href="games/mma.html" class="mobile-dropdown-item">ü•ã MMA</a>
            <a href="games/olympics.html" class="mobile-dropdown-item">üèÖ Olympics</a>
          </div>
        </li>
        
        <li><a href="scores.html" class="mobile-nav-link mobile-nav-active">Scores</a></li>
        <li><a href="watch.html" class="mobile-nav-link">Watch</a></li>
        <li><a href="teams.html" class="mobile-nav-link">Teams</a></li>
        <li><a href="fixtures.html" class="mobile-nav-link">Fixtures</a></li>
        
        <!-- Profile Link -->
        <li role="none">
          <a role="menuitem" href="profile.html" class="nav-link nav-active" aria-current="page">Profile</a>
        </li>
      </ul>
    </nav>
      </ul>
    </nav>

    <div class="mobile-actions">
      <div class="search mobile-search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M21 21l-4.35-4.35" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <circle cx="11" cy="11" r="6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input placeholder="Search matches..." aria-label="Search matches" id="mobileSearchInput">
        <div class="search-results" id="mobileSearchResults"></div>
      </div>
      
      <div class="user-menu">
        <button class="btn btn-login mobile-login" id="mobileLoginBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
          </svg>
          <span id="mobileLoginText">Login</span>
        </button>
        <div class="user-dropdown" id="mobileUserDropdown">
          <a href="#" id="mobileLogoutBtn">Sign Out</a>
        </div>
      </div>
    </div>
  </div>
</header>
<!-- Main Content -->
<div class="container">
  <!-- Page Header -->
  <div class="page-header">
    <h1 class="page-title">Live Scores & Results</h1>
    <p class="page-subtitle">Real-time scores from all major sports leagues and tournaments</p>
  </div>

  <!-- Live Ticker -->
  <div class="ticker" role="region" aria-label="Live scores and updates">
    <div class="label">LIVE</div>
    <div class="marquee" id="liveTicker" aria-live="polite">
      <div class="marquee-inner" id="marqueeInner">
        ‚öΩ Man City 2-1 Liverpool (75') ‚Ä¢ üèÄ Lakers vs Celtics: 98-95 Q4 ‚Ä¢ üèè IND vs AUS: 245/3 (45) ‚Ä¢ üéæ Djokovic leads 2-1 sets ‚Ä¢ ‚öæ Yankees 4-3 Red Sox F ‚Ä¢ üèí Maple Leafs 3-2 Canadiens (P3) ‚Ä¢ üèâ All Blacks 24-18 Springboks (65') ‚Ä¢ ü•ä Alvarez vs Plant: Round 8
      </div>
    </div>
    <div class="meta">Updated: <strong id="tickerTime">Just now</strong></div>
  </div>

  <!-- Advanced Filters -->
  <div class="advanced-filters" aria-label="Advanced filters for scores">
    <div class="filter-group">
      <label for="sportFilter">Sport</label>
      <select id="sportFilter" class="filter-select">
        <option value="All">All Sports</option>
        <option value="Football">‚öΩ Football</option>
        <option value="Cricket">üèè Cricket</option>
        <option value="Basketball">üèÄ Basketball</option>
        <option value="Tennis">üéæ Tennis</option>
        <option value="Baseball">‚öæ Baseball</option>
        <option value="Hockey">üèí Hockey</option>
        <option value="Rugby">üèâ Rugby</option>
        <option value="Boxing">ü•ä Boxing</option>
        <option value="Formula1">üèéÔ∏è Formula 1</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label for="leagueFilter">League</label>
      <select id="leagueFilter" class="filter-select">
        <option value="All">All Leagues</option>
        <option value="premier-league">Premier League</option>
        <option value="nba">NBA</option>
        <option value="ipl">IPL</option>
        <option value="nfl">NFL</option>
        <option value="mlb">MLB</option>
        <option value="nhl">NHL</option>
        <option value="rugby-championship">Rugby Championship</option>
        <option value="formula1">Formula 1</option>
      </select>
    </div>
    
    <div class="filter-group">
      <label for="statusFilter">Status</label>
      <select id="statusFilter" class="filter-select">
        <option value="All">All Status</option>
        <option value="Live">Live</option>
        <option value="Upcoming">Upcoming</option>
        <option value="Finished">Finished</option>
      </select>
    </div>

    <div class="filter-group">
      <button class="btn btn-secondary" id="resetFiltersBtn">Clear Filters</button>
    </div>
  </div>

  <!-- Main Content -->
  <main class="scores-main">
    <!-- Live Matches Section -->
    <section class="scores-section">
      <div class="section-header">
        <h2 class="section-title">Live Matches</h2>
        <div class="live-count" id="liveCount">Loading...</div>
      </div>
      
      <div class="loading" id="liveLoading">
        <div class="loading-spinner"></div>
        <p>Loading live matches...</p>
      </div>
      
      <div class="scores-grid" id="liveScoresGrid">
        <!-- Content will be loaded from API -->
      </div>
      
      <div class="no-results" id="liveNoResults" style="display: none;">
        <h3>No live matches found</h3>
        <p>Try adjusting your search criteria or check back later</p>
      </div>
    </section>

    <!-- Today's Results Section -->
    <section class="scores-section">
      <div class="section-header">
        <h2 class="section-title">Today's Results</h2>
        <div class="date-filter" id="todayDate">November 17, 2024</div>
      </div>
      
      <div class="loading" id="resultsLoading">
        <div class="loading-spinner"></div>
        <p>Loading today's results...</p>
      </div>
      
      <div class="scores-grid" id="resultsGrid">
        <!-- Content will be loaded from API -->
      </div>
      
      <div class="no-results" id="resultsNoResults" style="display: none;">
        <h3>No results found</h3>
        <p>Try adjusting your search criteria or check another date</p>
      </div>
    </section>

    <!-- Upcoming Matches Section -->
    <section class="scores-section">
      <div class="section-header">
        <h2 class="section-title">Upcoming Matches</h2>
        <div class="time-range">Next 24 hours</div>
      </div>
      
      <div class="loading" id="upcomingLoading">
        <div class="loading-spinner"></div>
        <p>Loading upcoming matches...</p>
      </div>
      
      <div class="scores-grid" id="upcomingGrid">
        <!-- Content will be loaded from API -->
      </div>
      
      <div class="no-results" id="upcomingNoResults" style="display: none;">
        <h3>No upcoming matches found</h3>
        <p>Try adjusting your search criteria or check another time period</p>
      </div>
    </section>
  </main>
</div>

<!-- Footer -->
<footer role="contentinfo">
  <div class="footer-content">
    <div class="footer-section">
      <h5>AllSports</h5>
      <p>Your premier destination for sports news, live scores, and video highlights.</p>
    </div>
    <div class="footer-section">
      <h5>Sports</h5>
      <a href="games/football.html">Football</a>
      <a href="games/cricket.html">Cricket</a>
      <a href="games/basketball.html">Basketball</a>
      <a href="games/tennis.html">Tennis</a>
    </div>
    <div class="footer-section">
      <h5>Company</h5>
      <a href="#about">About</a>
      <a href="#contact">Contact</a>
      <a href="#privacy">Privacy</a>
      <a href="#terms">Terms</a>
    </div>
  </div>
  <div class="footer-bottom">
    ¬© 2024 AllSports ‚Äî Built with ‚ù§Ô∏è for sports fans worldwide
  </div>
</footer>

<!-- Modals -->
<!-- Stats Modal -->
<div id="statsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="statsModalTitle">Match Statistics</h2>
      <button class="modal-close" id="closeStatsModal">&times;</button>
    </div>
    <div class="modal-body" id="statsModalBody">
      <!-- Stats content will be dynamically inserted here -->
    </div>
  </div>
</div>

<!-- Highlights Modal -->
<div id="highlightsModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="highlightsModalTitle">Match Highlights</h2>
      <button class="modal-close" id="closeHighlightsModal">&times;</button>
    </div>
    <div class="modal-body" id="highlightsModalBody">
      <!-- Highlights content will be dynamically inserted here -->
    </div>
  </div>
</div>

<!-- Preview Modal -->
<div id="previewModal" class="modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title" id="previewModalTitle">Match Preview</h2>
      <button class="modal-close" id="closePreviewModal">&times;</button>
    </div>
    <div class="modal-body" id="previewModalBody">
      <!-- Preview content will be dynamically inserted here -->
    </div>
  </div>
</div>

<!-- Toast Notification -->
<div id="toast" class="toast"></div>

<script>
// Enhanced Scores App with Robust API Integration and Signout Functionality
class ScoresApp {
  constructor() {
    this.state = {
      user: null,
      followedMatches: new Set(),
      remindedMatches: new Set(),
      currentFilters: {
        sport: 'All',
        league: 'All',
        status: 'All'
      },
      allScores: {
        live: [],
        results: [],
        upcoming: []
      }
    };
    
    // API endpoints
    this.endpoints = {
      live: '/api/scores/live',
      results: '/api/scores/results', 
      upcoming: '/api/scores/upcoming',
      match: '/api/scores'
    };
    
    // Sample data for search functionality
    this.searchData = [
      { id: '101', title: "Manchester City vs Liverpool", sport: "Football", status: "Live", time: "75'", score: "2-1" },
      { id: '102', title: "Boston Celtics vs LA Lakers", sport: "Basketball", status: "Live", time: "Q4", score: "95-98" },
      { id: '103', title: "India vs Australia", sport: "Cricket", status: "Live", time: "45th Over", score: "245/3 - 280/6" },
      { id: '201', title: "Barcelona vs Real Madrid", sport: "Football", status: "Finished", time: "FT", score: "1-3" },
      { id: '202', title: "Novak Djokovic vs Carlos Alcaraz", sport: "Tennis", status: "Finished", time: "Final", score: "2-1" },
      { id: '203', title: "NY Yankees vs Boston Red Sox", sport: "Baseball", status: "Finished", time: "Final", score: "4-3" },
      { id: '301', title: "Bayern Munich vs Paris SG", sport: "Football", status: "Upcoming", time: "19:45", score: "-" },
      { id: '302', title: "Golden State Warriors vs Phoenix Suns", sport: "Basketball", status: "Upcoming", time: "02:30", score: "-" },
      { id: '303', title: "England vs Pakistan", sport: "Cricket", status: "Upcoming", time: "08:00", score: "-" },
      { id: "team-mc", title: "Manchester City", type: "Team", sport: "Football" },
      { id: "team-liv", title: "Liverpool", type: "Team", sport: "Football" },
      { id: "team-bos", title: "Boston Celtics", type: "Team", sport: "Basketball" },
      { id: "team-lal", title: "LA Lakers", type: "Team", sport: "Basketball" },
      { id: "player-mbappe", title: "Kylian Mbapp√©", type: "Player", sport: "Football" },
      { id: "player-curry", title: "Stephen Curry", type: "Player", sport: "Basketball" },
      { id: "player-djokovic", title: "Novak Djokovic", type: "Player", sport: "Tennis" }
    ];
    
    this.init();
  }

  async init() {
    console.log('Scores App Initializing...');
    
    // Show loading states
    this.showLoadingStates();
    
    await this.checkAuthStatus();
    await this.loadFollowedMatches();
    await this.loadRemindedMatches();
    
    // Load all scores from API
    await this.loadAllScores();
    
    this.setupEventListeners();
    this.updateFollowButtons();
    this.updateReminderButtons();
    this.setupModalListeners();
    this.setupSearchFunctionality();
    this.setupUserMenuListeners();
    this.renderScores();
    
    // Update ticker time
    this.updateTickerTime();
    
    // Set today's date
    this.setTodaysDate();
  }

  setupUserMenuListeners() {
    const loginBtn = document.getElementById('loginBtn');
    const mobileLoginBtn = document.getElementById('mobileLoginBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const mobileLogoutBtn = document.getElementById('mobileLogoutBtn');
    const userDropdown = document.getElementById('userDropdown');
    const mobileUserDropdown = document.getElementById('mobileUserDropdown');

    // Desktop login button click
    if (loginBtn) {
      loginBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (this.state.user) {
          // Toggle dropdown when logged in
          userDropdown.style.display = userDropdown.style.display === 'block' ? 'none' : 'block';
        } else {
          // Redirect to login when not logged in
          window.location.href = 'login.html';
        }
      });
    }

    // Mobile login button click
    if (mobileLoginBtn) {
      mobileLoginBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (this.state.user) {
          // Toggle dropdown when logged in
          mobileUserDropdown.style.display = mobileUserDropdown.style.display === 'block' ? 'none' : 'block';
        } else {
          // Redirect to login when not logged in
          window.location.href = 'login.html';
        }
      });
    }

    // Desktop logout button
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        e.stopPropagation();
        await this.logout();
        userDropdown.style.display = 'none';
      });
    }

    // Mobile logout button
    if (mobileLogoutBtn) {
      mobileLogoutBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        e.stopPropagation();
        await this.logout();
        mobileUserDropdown.style.display = 'none';
      });
    }

    // Close dropdowns when clicking outside
    document.addEventListener('click', () => {
      if (userDropdown) userDropdown.style.display = 'none';
      if (mobileUserDropdown) mobileUserDropdown.style.display = 'none';
    });

    // Prevent dropdown close when clicking inside dropdown
    if (userDropdown) {
      userDropdown.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    }

    if (mobileUserDropdown) {
      mobileUserDropdown.addEventListener('click', (e) => {
        e.stopPropagation();
      });
    }
  }

  async logout() {
    try {
      console.log('Attempting logout...');
      
      const response = await this.fetchWithTimeout('/api/logout', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        credentials: 'include'
      });

      if (response && response.success) {
        // Clear user state
        this.state.user = null;
        this.state.followedMatches.clear();
        this.state.remindedMatches.clear();
        
        // Update UI
        this.updateAuthUI();
        this.updateFollowButtons();
        this.updateReminderButtons();
        
        // Hide dropdowns
        const userDropdown = document.getElementById('userDropdown');
        const mobileUserDropdown = document.getElementById('mobileUserDropdown');
        if (userDropdown) userDropdown.style.display = 'none';
        if (mobileUserDropdown) mobileUserDropdown.style.display = 'none';
        
        this.showToast('Logged out successfully');
        console.log('Logout successful');
      } else {
        this.showToast('Error during logout');
        console.error('Logout failed:', response);
      }
    } catch (error) {
      console.error('Logout error:', error);
      this.showToast('Error during logout');
    }
  }

  showLoadingStates() {
    document.getElementById('liveLoading').style.display = 'block';
    document.getElementById('resultsLoading').style.display = 'block';
    document.getElementById('upcomingLoading').style.display = 'block';
  }

  hideLoadingStates() {
    document.getElementById('liveLoading').style.display = 'none';
    document.getElementById('resultsLoading').style.display = 'none';
    document.getElementById('upcomingLoading').style.display = 'none';
  }

  async loadAllScores() {
    try {
      console.log('Loading scores from API...');
      
      // Load all scores in parallel with error handling
      const [liveResponse, resultsResponse, upcomingResponse] = await Promise.all([
        this.loadScoresFromAPI(this.endpoints.live, 'live'),
        this.loadScoresFromAPI(this.endpoints.results, 'results'),
        this.loadScoresFromAPI(this.endpoints.upcoming, 'upcoming')
      ]);

      // Store the loaded scores
      this.state.allScores.live = liveResponse || [];
      this.state.allScores.results = resultsResponse || [];
      this.state.allScores.upcoming = upcomingResponse || [];

      console.log('Scores loaded successfully:', {
        live: this.state.allScores.live.length,
        results: this.state.allScores.results.length,
        upcoming: this.state.allScores.upcoming.length
      });

      // Hide loading states
      this.hideLoadingStates();

    } catch (error) {
      console.error('Error in loadAllScores:', error);
      this.hideLoadingStates();
      this.showToast('Error loading scores. Please try refreshing the page.');
    }
  }

  async loadScoresFromAPI(endpoint, type) {
    try {
      console.log(`Loading ${type} scores from ${endpoint}...`);
      
      const response = await this.fetchWithTimeout(endpoint);
      
      if (response && response.success) {
        console.log(`‚úÖ Successfully loaded ${response.scores?.length || 0} ${type} scores`);
        return response.scores || [];
      } else {
        console.warn(`‚ùå Failed to load ${type} scores from API, using sample data`);
        return this.getSampleScores(type);
      }
    } catch (error) {
      console.error(`‚ùå Error loading ${type} scores:`, error);
      return this.getSampleScores(type);
    }
  }

  async fetchWithTimeout(url, options = {}, timeout = 5000) {
    const controller = new AbortController();
    const id = setTimeout(() => controller.abort(), timeout);
    
    try {
      const response = await fetch(url, {
        ...options,
        signal: controller.signal,
        credentials: 'include'
      });
      
      clearTimeout(id);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      return await response.json();
    } catch (error) {
      clearTimeout(id);
      console.warn(`API call failed for ${url}:`, error.message);
      return null;
    }
  }

  getSampleScores(type) {
    const sampleData = {
      live: [
        {
          matchId: '101',
          sport: 'Football',
          league: 'Premier League',
          teams: {
            home: { name: 'Manchester City', logo: 'MC', score: '2' },
            away: { name: 'Liverpool', logo: 'LIV', score: '1' }
          },
          status: 'live',
          minute: '75',
          venue: 'Etihad Stadium',
          time: new Date(),
          competition: 'Premier League ‚Ä¢ Etihad Stadium',
          matchDetails: {
            venue: 'Etihad Stadium',
            time: 'Live - 2nd Half'
          }
        },
       
        {
          matchId: '303',
          sport: 'Cricket',
          league: 'T20 World Cup',
          teams: {
            home: { name: 'England', logo: 'ENG', score: '-' },
            away: { name: 'Pakistan', logo: 'PAK', score: '-' }
          },
          status: 'upcoming',
          venue: 'Dubai International',
          time: new Date(Date.now() + 86400000),
          competition: 'T20 World Cup ‚Ä¢ Dubai',
          matchDetails: {
            venue: 'Dubai International',
            time: 'Tomorrow, 08:00 GMT'
          }
        }
      ]
    };
    
    return sampleData[type] || [];
  }

  renderScores() {
    this.renderLiveScores();
    this.renderResults();
    this.renderUpcoming();
    this.updateLiveCount();
    this.updateNoResultsVisibility();
  }

  renderLiveScores() {
    this.renderScoreSection('live', 'liveScoresGrid', 'liveNoResults');
  }

  renderResults() {
    this.renderScoreSection('results', 'resultsGrid', 'resultsNoResults');
  }

  renderUpcoming() {
    this.renderScoreSection('upcoming', 'upcomingGrid', 'upcomingNoResults');
  }

  renderScoreSection(type, gridId, noResultsId) {
    const grid = document.getElementById(gridId);
    const noResults = document.getElementById(noResultsId);
    
    if (!grid) return;

    const filteredScores = this.filterScores(this.state.allScores[type], type);
    
    if (filteredScores.length === 0) {
      grid.innerHTML = '';
      if (noResults) noResults.style.display = 'block';
      return;
    }

    if (noResults) noResults.style.display = 'none';
    grid.innerHTML = filteredScores.map(score => this.createMatchCard(score)).join('');
    
    // Re-attach event listeners for the new buttons
    this.attachEventListenersToCards();
  }

  filterScores(scores, status) {
    return scores.filter(score => {
      if (this.state.currentFilters.sport !== 'All' && 
          this.state.currentFilters.sport !== score.sport) {
        return false;
      }
      
      if (this.state.currentFilters.league !== 'All') {
        const league = this.state.currentFilters.league.toLowerCase();
        if (!score.league.toLowerCase().includes(league) && 
            !score.competition?.toLowerCase().includes(league)) {
          return false;
        }
      }
      
      if (this.state.currentFilters.status !== 'All' && 
          this.state.currentFilters.status.toLowerCase() !== status) {
        return false;
      }
      
      return true;
    });
  }

  createMatchCard(score) {
    const sportIcons = {
      'Football': '‚öΩ',
      'Basketball': 'üèÄ',
      'Cricket': 'üèè',
      'Tennis': 'üéæ',
      'Baseball': '‚öæ',
      'Hockey': 'üèí',
      'Rugby': 'üèâ',
      'Boxing': 'ü•ä',
      'Formula1': 'üèéÔ∏è',
      'Golf': '‚õ≥',
      'MMA': 'ü•ã',
      'Formula 1': 'üèéÔ∏è'
    };

    const statusClass = score.status;
    const statusText = score.status === 'live' ? (score.minute || 'Live') : 
                      score.status === 'finished' ? 'FT' : 
                      new Date(score.time).toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

    const isFollowing = this.state.followedMatches.has(score.matchId);
    const followBtnClass = isFollowing ? 'follow-btn followed' : 'follow-btn';
    const followBtnText = isFollowing ? 'Followed' : 'Follow';

    const isReminderSet = this.state.remindedMatches.has(score.matchId);
    const reminderBtnClass = isReminderSet ? 'reminder-btn reminder-set' : 'reminder-btn';
    const reminderBtnText = isReminderSet ? 'Reminder Set' : 'Remind Me';

    return `
      <div class="match-card ${statusClass}" data-sport="${score.sport}" data-match-id="${score.matchId}">
        <div class="match-header">
          <div class="match-sport">
            <span class="sport-icon">${sportIcons[score.sport] || 'üèÜ'}</span>
            <span>${score.sport}</span>
          </div>
          <div class="match-status ${statusClass}">
            ${score.status === 'live' ? '<div class="live-indicator"></div>' : ''}
            <span>${statusText}</span>
          </div>
        </div>
        <div class="match-competition">
          ${score.competition || score.league}
        </div>
        <div class="match-teams">
          <div class="team home-team">
            <div class="team-info">
              <div class="team-logo">${score.teams.home.logo}</div>
              <div class="team-name">${score.teams.home.name}</div>
            </div>
            <div class="team-score">${score.teams.home.score}</div>
          </div>
          <div class="team away-team">
            <div class="team-info">
              <div class="team-logo">${score.teams.away.logo}</div>
              <div class="team-name">${score.teams.away.name}</div>
            </div>
            <div class="team-score">${score.teams.away.score}</div>
          </div>
        </div>
        <div class="match-details">
          <div class="match-venue">
            <i class="fas fa-map-marker-alt"></i>
            ${score.matchDetails?.venue || score.venue || 'Unknown Venue'}
          </div>
          <div class="match-time">
            <i class="fas fa-clock"></i>
            ${score.matchDetails?.time || new Date(score.time).toLocaleString()}
          </div>
        </div>
        <div class="match-actions">
          ${score.status === 'upcoming' ? 
            `<button class="btn btn-small ${reminderBtnClass}" data-match-id="${score.matchId}">
              <span class="btn-text">${reminderBtnText}</span>
              <span class="hover-text">Off Reminder</span>
            </button>` : 
            `<button class="btn btn-small ${followBtnClass}" data-match-id="${score.matchId}">
              <span class="btn-text">${followBtnText}</span>
              <span class="hover-text">Unfollow</span>
            </button>`
          }
          <button class="btn btn-small ghost ${
            score.status === 'live' ? 'stats-btn' : 
            score.status === 'finished' ? 'highlights-btn' : 
            'preview-btn'
          }" data-match-id="${score.matchId}">
            ${score.status === 'live' ? 'Stats' : 
              score.status === 'finished' ? 'Highlights' : 
              'Preview'}
          </button>
        </div>
      </div>
    `;
  }

  attachEventListenersToCards() {
    // Follow buttons
    const followButtons = document.querySelectorAll('.follow-btn');
    followButtons.forEach(button => {
      button.addEventListener('click', async (e) => {
        e.stopPropagation();
        const matchId = button.dataset.matchId;
        const matchCard = button.closest('.match-card');
        const matchData = this.getMatchData(matchCard);
        
        await this.toggleFollowMatch(matchId, matchData);
      });
    });

    // Reminder buttons
    const reminderButtons = document.querySelectorAll('.reminder-btn');
    reminderButtons.forEach(button => {
      button.addEventListener('click', async (e) => {
        e.stopPropagation();
        const matchId = button.dataset.matchId;
        const matchCard = button.closest('.match-card');
        const matchData = this.getMatchData(matchCard);
        
        await this.toggleReminder(matchId, matchData);
      });
    });

    // Action buttons (stats, highlights, preview)
    const actionButtons = document.querySelectorAll('.stats-btn, .highlights-btn, .preview-btn');
    actionButtons.forEach(button => {
      button.addEventListener('click', (e) => {
        e.stopPropagation();
        const matchId = button.dataset.matchId;
        
        if (button.classList.contains('stats-btn')) {
          this.showStatsModal(matchId);
        } else if (button.classList.contains('highlights-btn')) {
          this.showHighlightsModal(matchId);
        } else if (button.classList.contains('preview-btn')) {
          this.showPreviewModal(matchId);
        }
      });
    });
  }

  updateLiveCount() {
    const liveCount = document.getElementById('liveCount');
    if (liveCount) {
      const count = this.filterScores(this.state.allScores.live, 'live').length;
      liveCount.textContent = `${count} match${count !== 1 ? 'es' : ''} live`;
    }
  }

  updateTickerTime() {
    const tickerTime = document.getElementById('tickerTime');
    if (tickerTime) {
      tickerTime.textContent = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
    }
  }

  setTodaysDate() {
    const todayDate = document.getElementById('todayDate');
    if (todayDate) {
      const today = new Date();
      const options = { year: 'numeric', month: 'long', day: 'numeric' };
      todayDate.textContent = today.toLocaleDateString('en-US', options);
    }
  }

  updateNoResultsVisibility() {
    const liveNoResults = document.getElementById('liveNoResults');
    const resultsNoResults = document.getElementById('resultsNoResults');
    const upcomingNoResults = document.getElementById('upcomingNoResults');
    
    const liveCount = this.filterScores(this.state.allScores.live, 'live').length;
    const resultsCount = this.filterScores(this.state.allScores.results, 'finished').length;
    const upcomingCount = this.filterScores(this.state.allScores.upcoming, 'upcoming').length;
    
    if (liveNoResults) {
      liveNoResults.style.display = liveCount === 0 ? 'block' : 'none';
    }
    
    if (resultsNoResults) {
      resultsNoResults.style.display = resultsCount === 0 ? 'block' : 'none';
    }
    
    if (upcomingNoResults) {
      upcomingNoResults.style.display = upcomingCount === 0 ? 'block' : 'none';
    }
  }

  setupSearchFunctionality() {
    // Header search
    const searchInput = document.getElementById('searchInput');
    const searchResults = document.getElementById('searchResults');
    
    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        const query = e.target.value.trim();
        this.performSearch(query, searchResults);
      });
      
      // Hide results when clicking outside
      document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
          searchResults.classList.remove('active');
        }
      });
    }

    // Mobile search
    const mobileSearchInput = document.getElementById('mobileSearchInput');
    const mobileSearchResults = document.getElementById('mobileSearchResults');
    
    if (mobileSearchInput) {
      mobileSearchInput.addEventListener('input', (e) => {
        const query = e.target.value.trim();
        this.performSearch(query, mobileSearchResults);
      });
      
      // Hide results when clicking outside
      document.addEventListener('click', (e) => {
        if (!mobileSearchInput.contains(e.target) && !mobileSearchResults.contains(e.target)) {
          mobileSearchResults.classList.remove('active');
        }
      });
    }
  }

  performSearch(query, resultsContainer) {
    if (!query) {
      resultsContainer.classList.remove('active');
      return;
    }
    
    const filteredResults = this.searchData.filter(item => 
      item.title.toLowerCase().includes(query.toLowerCase())
    );
    
    this.displaySearchResults(filteredResults, resultsContainer);
  }

  displaySearchResults(results, container) {
    if (results.length === 0) {
      container.innerHTML = `
        <div class="search-result-item">
          <div class="search-result-title">No results found</div>
          <div class="search-result-details">Try different keywords</div>
        </div>
      `;
    } else {
      container.innerHTML = results.map(item => {
        let details = '';
        
        if (item.type === 'Team') {
          details = `${item.sport} Team`;
        } else if (item.type === 'Player') {
          details = `${item.sport} Player`;
        } else {
          details = `${item.sport} ‚Ä¢ ${item.status} ‚Ä¢ ${item.score}`;
        }
        
        return `
          <div class="search-result-item" data-id="${item.id}">
            <div class="search-result-header">
              <span class="search-result-sport">${item.sport}</span>
              ${item.status ? `<span class="match-status ${item.status.toLowerCase()}">${item.status}</span>` : ''}
            </div>
            <div class="search-result-title">${item.title}</div>
            <div class="search-result-details">${details}</div>
          </div>
        `;
      }).join('');
    }
    
    container.classList.add('active');
    
    // Add click handlers to search results
    container.querySelectorAll('.search-result-item').forEach(item => {
      item.addEventListener('click', () => {
        const itemId = item.dataset.id;
        this.handleSearchResultClick(itemId);
        container.classList.remove('active');
      });
    });
  }

  handleSearchResultClick(itemId) {
    // Handle different types of search results
    if (itemId.startsWith('team-')) {
      // Navigate to team page
      this.showToast(`Navigating to team: ${itemId}`);
    } else if (itemId.startsWith('player-')) {
      // Navigate to player page
      this.showToast(`Navigating to player: ${itemId}`);
    } else {
      // It's a match ID, scroll to and highlight the match card
      const matchCard = document.querySelector(`.match-card[data-match-id="${itemId}"]`);
      if (matchCard) {
        matchCard.scrollIntoView({ behavior: 'smooth', block: 'center' });
        
        // Add highlight effect
        matchCard.style.boxShadow = '0 0 0 3px var(--accent)';
        setTimeout(() => {
          matchCard.style.boxShadow = '';
        }, 2000);
        
        this.showToast(`Showing match: ${itemId}`);
      } else {
        this.showToast('Match not found on current page');
      }
    }
  }

  setupModalListeners() {
    // Stats modal
    const statsModal = document.getElementById('statsModal');
    const closeStatsModal = document.getElementById('closeStatsModal');
    
    closeStatsModal.addEventListener('click', () => {
      statsModal.classList.remove('active');
    });
    
    statsModal.addEventListener('click', (e) => {
      if (e.target === statsModal) {
        statsModal.classList.remove('active');
      }
    });
    
    // Highlights modal
    const highlightsModal = document.getElementById('highlightsModal');
    const closeHighlightsModal = document.getElementById('closeHighlightsModal');
    
    closeHighlightsModal.addEventListener('click', () => {
      highlightsModal.classList.remove('active');
    });
    
    highlightsModal.addEventListener('click', (e) => {
      if (e.target === highlightsModal) {
        highlightsModal.classList.remove('active');
      }
    });
    
    // Preview modal
    const previewModal = document.getElementById('previewModal');
    const closePreviewModal = document.getElementById('closePreviewModal');
    
    closePreviewModal.addEventListener('click', () => {
      previewModal.classList.remove('active');
    });
    
    previewModal.addEventListener('click', (e) => {
      if (e.target === previewModal) {
        previewModal.classList.remove('active');
      }
    });
  }

  async showStatsModal(matchId) {
    try {
      const response = await this.fetchWithTimeout(`${this.endpoints.match}/${matchId}`);
      
      if (!response || !response.success || !response.score) {
        // Use sample data if API fails
        const score = this.getSampleMatchData(matchId);
        if (!score) {
          this.showToast('Stats data not available for this match');
          return;
        }
        
        const statsModal = document.getElementById('statsModal');
        const statsModalTitle = document.getElementById('statsModalTitle');
        const statsModalBody = document.getElementById('statsModalBody');
        
        statsModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Statistics`;
        
        let statsHTML = '';
        
        // Key stats
        if (score.stats && Object.keys(score.stats).length > 0) {
          statsHTML += `
            <div class="stats-container">
          `;
          
          for (const [key, value] of Object.entries(score.stats)) {
            const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
            statsHTML += `
              <div class="stat-item">
                <div class="stat-value">${value}</div>
                <div class="stat-label">${formattedKey}</div>
              </div>
            `;
          }
          
          statsHTML += `</div>`;
        } else {
          statsHTML += `<div class="stats-container">
            <div class="stat-item">
              <div class="stat-value">${score.teams.home.score}</div>
              <div class="stat-label">${score.teams.home.name}</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${score.teams.away.score}</div>
              <div class="stat-label">${score.teams.away.name}</div>
            </div>
            <div class="stat-item">
              <div class="stat-value">${score.status}</div>
              <div class="stat-label">Status</div>
            </div>
          </div>`;
        }
        
        // Team stats
        if (score.teamStats && score.teamStats.home && score.teamStats.away) {
          statsHTML += `
            <div class="team-stats">
              <div class="team-stat">
                <div class="team-stat-header">
                  <div class="team-logo">${score.teams.home.logo}</div>
                  <div class="team-stat-title">${score.teams.home.name}</div>
                </div>
                <div class="stat-list">
          `;
          
          for (const [key, value] of Object.entries(score.teamStats.home)) {
            if (key !== 'name') {
              const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
              statsHTML += `
                <div class="stat-row">
                  <span class="stat-name">${formattedKey}</span>
                  <span class="stat-value-team">${value}</span>
                </div>
              `;
            }
          }
          
          statsHTML += `
                </div>
              </div>
              
              <div class="team-stat">
                <div class="team-stat-header">
                  <div class="team-logo">${score.teams.away.logo}</div>
                  <div class="team-stat-title">${score.teams.away.name}</div>
                </div>
                <div class="stat-list">
          `;
          
          for (const [key, value] of Object.entries(score.teamStats.away)) {
            if (key !== 'name') {
              const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
              statsHTML += `
                <div class="stat-row">
                  <span class="stat-name">${formattedKey}</span>
                  <span class="stat-value-team">${value}</span>
                </div>
              `;
            }
          }
          
          statsHTML += `
                </div>
              </div>
            </div>
          `;
        }
        
        statsModalBody.innerHTML = statsHTML;
        statsModal.classList.add('active');
        return;
      }

      const score = response.score;
      const statsModal = document.getElementById('statsModal');
      const statsModalTitle = document.getElementById('statsModalTitle');
      const statsModalBody = document.getElementById('statsModalBody');
      
      statsModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Statistics`;
      
      let statsHTML = '';
      
      // Key stats
      if (score.stats && Object.keys(score.stats).length > 0) {
        statsHTML += `
          <div class="stats-container">
        `;
        
        for (const [key, value] of Object.entries(score.stats)) {
          const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
          statsHTML += `
            <div class="stat-item">
              <div class="stat-value">${value}</div>
              <div class="stat-label">${formattedKey}</div>
            </div>
          `;
        }
        
        statsHTML += `</div>`;
      } else {
        statsHTML += `<div class="stats-container">
          <div class="stat-item">
            <div class="stat-value">${score.teams.home.score}</div>
            <div class="stat-label">${score.teams.home.name}</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">${score.teams.away.score}</div>
            <div class="stat-label">${score.teams.away.name}</div>
          </div>
          <div class="stat-item">
            <div class="stat-value">${score.status}</div>
            <div class="stat-label">Status</div>
          </div>
        </div>`;
      }
      
      // Team stats
      if (score.teamStats && score.teamStats.home && score.teamStats.away) {
        statsHTML += `
          <div class="team-stats">
            <div class="team-stat">
              <div class="team-stat-header">
                <div class="team-logo">${score.teams.home.logo}</div>
                <div class="team-stat-title">${score.teams.home.name}</div>
              </div>
              <div class="stat-list">
        `;
        
        for (const [key, value] of Object.entries(score.teamStats.home)) {
          if (key !== 'name') {
            const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
            statsHTML += `
              <div class="stat-row">
                <span class="stat-name">${formattedKey}</span>
                <span class="stat-value-team">${value}</span>
              </div>
            `;
          }
        }
        
        statsHTML += `
              </div>
            </div>
            
            <div class="team-stat">
              <div class="team-stat-header">
                <div class="team-logo">${score.teams.away.logo}</div>
                <div class="team-stat-title">${score.teams.away.name}</div>
              </div>
              <div class="stat-list">
        `;
        
        for (const [key, value] of Object.entries(score.teamStats.away)) {
          if (key !== 'name') {
            const formattedKey = key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
            statsHTML += `
              <div class="stat-row">
                <span class="stat-name">${formattedKey}</span>
                <span class="stat-value-team">${value}</span>
              </div>
            `;
          }
        }
        
        statsHTML += `
              </div>
            </div>
          </div>
        `;
      }
      
      statsModalBody.innerHTML = statsHTML;
      statsModal.classList.add('active');
      
    } catch (error) {
      console.error('Error loading stats:', error);
      this.showToast('Error loading match statistics');
    }
  }

  async showHighlightsModal(matchId) {
    try {
      const response = await this.fetchWithTimeout(`${this.endpoints.match}/${matchId}`);
      
      if (!response || !response.success || !response.score) {
        // Use sample data if API fails
        const score = this.getSampleMatchData(matchId);
        if (!score) {
          this.showToast('Highlights not available for this match');
          return;
        }
        
        const highlightsModal = document.getElementById('highlightsModal');
        const highlightsModalTitle = document.getElementById('highlightsModalTitle');
        const highlightsModalBody = document.getElementById('highlightsModalBody');
        
        highlightsModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Highlights`;
        
        let highlightsHTML = '';
        
        if (score.highlights && score.highlights.videoId) {
          highlightsHTML = `
            <div class="video-container">
              <iframe 
                src="https://www.youtube.com/embed/${score.highlights.videoId}" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
              </iframe>
            </div>
          `;
        } else {
          highlightsHTML = `<p>Video highlights not available for this match.</p>`;
        }
        
        if (score.highlights && score.highlights.summary) {
          highlightsHTML += `
            <div class="match-summary">
              <div class="summary-title">Match Summary</div>
              <div class="summary-text">${score.highlights.summary}</div>
            </div>
          `;
        }
        
        highlightsModalBody.innerHTML = highlightsHTML;
        highlightsModal.classList.add('active');
        return;
      }

      const score = response.score;
      const highlightsModal = document.getElementById('highlightsModal');
      const highlightsModalTitle = document.getElementById('highlightsModalTitle');
      const highlightsModalBody = document.getElementById('highlightsModalBody');
      
      highlightsModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Highlights`;
      
      let highlightsHTML = '';
      
      if (score.highlights && score.highlights.videoId) {
        highlightsHTML = `
          <div class="video-container">
            <iframe 
              src="https://www.youtube.com/embed/${score.highlights.videoId}" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
            </iframe>
          </div>
        `;
      } else {
        highlightsHTML = `<p>Video highlights not available for this match.</p>`;
      }
      
      if (score.highlights && score.highlights.summary) {
        highlightsHTML += `
          <div class="match-summary">
            <div class="summary-title">Match Summary</div>
            <div class="summary-text">${score.highlights.summary}</div>
          </div>
        `;
      }
      
      highlightsModalBody.innerHTML = highlightsHTML;
      highlightsModal.classList.add('active');
      
    } catch (error) {
      console.error('Error loading highlights:', error);
      this.showToast('Error loading match highlights');
    }
  }

  async showPreviewModal(matchId) {
    try {
      const response = await this.fetchWithTimeout(`${this.endpoints.match}/${matchId}`);
      
      if (!response || !response.success || !response.score) {
        // Use sample data if API fails
        const score = this.getSampleMatchData(matchId);
        if (!score) {
          this.showToast('Preview not available for this match');
          return;
        }
        
        const previewModal = document.getElementById('previewModal');
        const previewModalTitle = document.getElementById('previewModalTitle');
        const previewModalBody = document.getElementById('previewModalBody');
        
        previewModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Preview`;
        
        let previewHTML = '';
        
        // Check if we have preview data in different possible structures
        const hasDetailedPreview = score.preview && score.preview.teams && 
                                 score.preview.teams.home && score.preview.teams.home.lineup;
        
        const hasMatchPreview = score.preview && score.preview.matchPreview;
        
        const hasPreview = score.preview;
        
        if (hasDetailedPreview) {
          // Detailed preview with lineup data (team sports)
          previewHTML = `
            <div class="preview-teams">
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.home.logo}</div>
                  <div class="preview-team-title">${score.teams.home.name}</div>
                </div>
                <div class="coach-info">
                  <span class="coach-label">Coach:</span>
                  <span class="coach-name">${score.preview.teams.home.coach}</span>
                </div>
                <div class="lineup-section">
                  <div class="lineup-title">Starting Lineup</div>
                  <div class="player-list">
          `;
          
          score.preview.teams.home.lineup.forEach(player => {
            previewHTML += `
              <div class="player-item">
                <div class="player-number">${player.number}</div>
                <div class="player-name">${player.name}</div>
                <div class="player-position">${player.position}</div>
              </div>
            `;
          });
          
          previewHTML += `
                  </div>
                </div>
              </div>
              
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.away.logo}</div>
                  <div class="preview-team-title">${score.teams.away.name}</div>
                </div>
                <div class="coach-info">
                  <span class="coach-label">Coach:</span>
                  <span class="coach-name">${score.preview.teams.away.coach}</span>
                </div>
                <div class="lineup-section">
                  <div class="lineup-title">Starting Lineup</div>
                  <div class="player-list">
          `;
          
          score.preview.teams.away.lineup.forEach(player => {
            previewHTML += `
              <div class="player-item">
                <div class="player-number">${player.number}</div>
                <div class="player-name">${player.name}</div>
                <div class="player-position">${player.position}</div>
              </div>
            `;
          });
          
          previewHTML += `
                  </div>
                </div>
              </div>
            </div>
          `;
        } 
        
        // Add match preview information if available
        if (hasMatchPreview) {
          previewHTML += `
            <div class="match-summary">
              <div class="summary-title">Match Preview</div>
              <div class="summary-text">${score.preview.matchPreview.summary}</div>
              ${score.preview.matchPreview.keyPlayers ? `
                <div class="summary-title" style="margin-top: 20px;">Key Players</div>
                <div class="summary-text">${Array.isArray(score.preview.matchPreview.keyPlayers) ? 
                  score.preview.matchPreview.keyPlayers.join(', ') : 
                  score.preview.matchPreview.keyPlayers}</div>
              ` : ''}
              ${score.preview.matchPreview.tacticalAnalysis ? `
                <div class="summary-title" style="margin-top: 20px;">Tactical Analysis</div>
                <div class="summary-text">${score.preview.matchPreview.tacticalAnalysis}</div>
              ` : ''}
            </div>
          `;
        } else if (hasPreview) {
          // Generic preview information
          previewHTML += `
            <div class="preview-teams">
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.home.logo}</div>
                  <div class="preview-team-title">${score.teams.home.name}</div>
                </div>
                <p>Preview information available for this match.</p>
              </div>
              
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.away.logo}</div>
                  <div class="preview-team-title">${score.teams.away.name}</div>
                </div>
                <p>Match details and analysis provided.</p>
              </div>
            </div>
          `;
        } else {
          // No preview data available
          previewHTML = `
            <div class="preview-teams">
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.home.logo}</div>
                  <div class="preview-team-title">${score.teams.home.name}</div>
                </div>
                <p>Preview information not available for this match.</p>
              </div>
              
              <div class="preview-team">
                <div class="preview-team-header">
                  <div class="team-logo">${score.teams.away.logo}</div>
                  <div class="preview-team-title">${score.teams.away.name}</div>
                </div>
                <p>Check back closer to match time for team news and lineups.</p>
              </div>
            </div>
          `;
        }
        
        previewModalBody.innerHTML = previewHTML;
        previewModal.classList.add('active');
        return;
      }

      const score = response.score;
      const previewModal = document.getElementById('previewModal');
      const previewModalTitle = document.getElementById('previewModalTitle');
      const previewModalBody = document.getElementById('previewModalBody');
      
      previewModalTitle.textContent = `${score.teams.home.name} vs ${score.teams.away.name} - Preview`;
      
      let previewHTML = '';
      
      // Check if we have preview data in different possible structures
      const hasDetailedPreview = score.preview && score.preview.teams && 
                               score.preview.teams.home && score.preview.teams.home.lineup;
      
      const hasMatchPreview = score.preview && score.preview.matchPreview;
      
      const hasPreview = score.preview;
      
      if (hasDetailedPreview) {
        // Detailed preview with lineup data (team sports)
        previewHTML = `
          <div class="preview-teams">
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.home.logo}</div>
                <div class="preview-team-title">${score.teams.home.name}</div>
              </div>
              <div class="coach-info">
                <span class="coach-label">Coach:</span>
                <span class="coach-name">${score.preview.teams.home.coach}</span>
              </div>
              <div class="lineup-section">
                <div class="lineup-title">Starting Lineup</div>
                <div class="player-list">
        `;
        
        score.preview.teams.home.lineup.forEach(player => {
          previewHTML += `
            <div class="player-item">
              <div class="player-number">${player.number}</div>
              <div class="player-name">${player.name}</div>
              <div class="player-position">${player.position}</div>
            </div>
          `;
        });
        
        previewHTML += `
                </div>
              </div>
            </div>
            
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.away.logo}</div>
                <div class="preview-team-title">${score.teams.away.name}</div>
              </div>
              <div class="coach-info">
                <span class="coach-label">Coach:</span>
                <span class="coach-name">${score.preview.teams.away.coach}</span>
              </div>
              <div class="lineup-section">
                <div class="lineup-title">Starting Lineup</div>
                <div class="player-list">
        `;
        
        score.preview.teams.away.lineup.forEach(player => {
          previewHTML += `
            <div class="player-item">
              <div class="player-number">${player.number}</div>
              <div class="player-name">${player.name}</div>
              <div class="player-position">${player.position}</div>
            </div>
          `;
        });
        
        previewHTML += `
                </div>
              </div>
            </div>
          </div>
        `;
      } 
      
      // Add match preview information if available
      if (hasMatchPreview) {
        previewHTML += `
          <div class="match-summary">
            <div class="summary-title">Match Preview</div>
            <div class="summary-text">${score.preview.matchPreview.summary}</div>
            ${score.preview.matchPreview.keyPlayers ? `
              <div class="summary-title" style="margin-top: 20px;">Key Players</div>
              <div class="summary-text">${Array.isArray(score.preview.matchPreview.keyPlayers) ? 
                score.preview.matchPreview.keyPlayers.join(', ') : 
                score.preview.matchPreview.keyPlayers}</div>
            ` : ''}
            ${score.preview.matchPreview.tacticalAnalysis ? `
              <div class="summary-title" style="margin-top: 20px;">Tactical Analysis</div>
              <div class="summary-text">${score.preview.matchPreview.tacticalAnalysis}</div>
            ` : ''}
          </div>
        `;
      } else if (hasPreview) {
        // Generic preview information
        previewHTML += `
          <div class="preview-teams">
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.home.logo}</div>
                <div class="preview-team-title">${score.teams.home.name}</div>
              </div>
              <p>Preview information available for this match.</p>
            </div>
            
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.away.logo}</div>
                <div class="preview-team-title">${score.teams.away.name}</div>
              </div>
              <p>Match details and analysis provided.</p>
            </div>
          </div>
        `;
      } else {
        // No preview data available
        previewHTML = `
          <div class="preview-teams">
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.home.logo}</div>
                <div class="preview-team-title">${score.teams.home.name}</div>
              </div>
              <p>Preview information not available for this match.</p>
            </div>
            
            <div class="preview-team">
              <div class="preview-team-header">
                <div class="team-logo">${score.teams.away.logo}</div>
                <div class="preview-team-title">${score.teams.away.name}</div>
              </div>
              <p>Check back closer to match time for team news and lineups.</p>
            </div>
          </div>
        `;
      }
      
      previewModalBody.innerHTML = previewHTML;
      previewModal.classList.add('active');
      
    } catch (error) {
      console.error('Error loading preview:', error);
      this.showToast('Error loading match preview');
    }
  }

  getSampleMatchData(matchId) {
    // Combine all sample scores
    const allSamples = [
      ...this.getSampleScores('live'),
      ...this.getSampleScores('results'),
      ...this.getSampleScores('upcoming')
    ];
    
    return allSamples.find(score => score.matchId === matchId);
  }

  async checkAuthStatus() {
    try {
      const response = await this.fetchWithTimeout('/api/user');
      
      if (response && response.success && response.user) {
        this.state.user = response.user;
        this.updateAuthUI();
        console.log('User authenticated:', this.state.user.username);
      } else {
        console.log('User not authenticated');
      }
    } catch (error) {
      console.error('Error checking auth status:', error);
    }
  }

  async loadFollowedMatches() {
    try {
      const response = await this.fetchWithTimeout('/api/user/followed-matches');
      
      if (response && response.success) {
        const matchIds = response.followedMatches.map(match => match.matchId);
        this.state.followedMatches = new Set(matchIds);
        console.log('Loaded followed matches:', matchIds);
      } else {
        console.log('No followed matches found or not logged in');
      }
    } catch (error) {
      console.error('Error loading followed matches:', error);
    }
  }

  async loadRemindedMatches() {
    try {
      const response = await this.fetchWithTimeout('/api/user/reminded-matches');
      
      if (response && response.success) {
        const matchIds = response.remindedMatches.map(match => match.matchId);
        this.state.remindedMatches = new Set(matchIds);
        console.log('Loaded reminded matches:', matchIds);
      } else {
        console.log('No reminded matches found or not logged in');
      }
    } catch (error) {
      console.error('Error loading reminded matches:', error);
    }
  }

  updateAuthUI() {
    const loginText = document.getElementById('loginText');
    const mobileLoginText = document.getElementById('mobileLoginText');
    
    if (this.state.user) {
      if (loginText) loginText.textContent = this.state.user.username;
      if (mobileLoginText) mobileLoginText.textContent = this.state.user.username;
    } else {
      if (loginText) loginText.textContent = 'Login';
      if (mobileLoginText) mobileLoginText.textContent = 'Login';
    }
  }

  updateFollowButtons() {
    const followButtons = document.querySelectorAll('.follow-btn');
    
    followButtons.forEach(button => {
      const matchId = button.dataset.matchId;
      const isFollowing = this.state.followedMatches.has(matchId);
      
      if (isFollowing) {
        button.classList.add('followed');
        button.querySelector('.btn-text').textContent = 'Followed';
      } else {
        button.classList.remove('followed');
        button.querySelector('.btn-text').textContent = 'Follow';
      }
    });
  }

  updateReminderButtons() {
    const reminderButtons = document.querySelectorAll('.reminder-btn');
    
    reminderButtons.forEach(button => {
      const matchId = button.dataset.matchId;
      const isReminderSet = this.state.remindedMatches.has(matchId);
      
      if (isReminderSet) {
        button.classList.add('reminder-set');
        button.querySelector('.btn-text').textContent = 'Reminder Set';
      } else {
        button.classList.remove('reminder-set');
        button.querySelector('.btn-text').textContent = 'Remind Me';
      }
    });
  }

  async toggleFollowMatch(matchId, matchData) {
    // Check if user is logged in
    if (!this.state.user) {
        this.showToast('Please log in to follow matches');
        setTimeout(() => {
            window.location.href = 'login.html';
        }, 1500);
        return;
    }

    // Determine the correct action based on current follow state
    const isCurrentlyFollowing = this.state.followedMatches.has(matchId);
    const action = isCurrentlyFollowing ? 'unfollow' : 'follow';

    console.log('Toggle follow match:', {
        matchId,
        currentState: isCurrentlyFollowing ? 'following' : 'not following',
        action
    });

    try {
        const response = await this.fetchWithTimeout('/api/user/follow-match', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            credentials: 'include',
            body: JSON.stringify({
                matchId: matchId,
                ...matchData,
                action
            })
        });

        if (!response) {
            throw new Error('No response from server');
        }

        console.log('Server response:', response);

        if (response.success) {
            // Update local state based on the action that was actually performed
            if (response.action === 'followed') {
                this.state.followedMatches.add(matchId);
            } else if (response.action === 'unfollowed') {
                this.state.followedMatches.delete(matchId);
            }

            // Update UI
            this.updateFollowButtons();
            
            // Show confirmation message
            this.showToast(response.message);
            
            console.log(`Match ${matchId} ${response.action} successfully`);
        } else {
            this.showToast(response.message || 'Error updating follow status');
        }
    } catch (error) {
        console.error('Error toggling match follow:', error);
        this.showToast('Server error. Please try again.');
    }
  }

  async toggleReminder(matchId, matchData) {
    // Check if user is logged in
    if (!this.state.user) {
        this.showToast('Please log in to set reminders');
        setTimeout(() => {
            window.location.href = 'login.html';
        }, 1500);
        return;
    }

    // Determine the correct action based on current reminder state
    const isCurrentlyReminded = this.state.remindedMatches.has(matchId);
    const action = isCurrentlyReminded ? 'remove' : 'add';

    console.log('Toggle reminder:', {
        matchId,
        currentState: isCurrentlyReminded ? 'reminder set' : 'no reminder',
        action
    });

    try {
        const response = await this.fetchWithTimeout('/api/user/set-reminder', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            credentials: 'include',
            body: JSON.stringify({
                matchId: matchId,
                ...matchData,
                action
            })
        });

        if (!response) {
            throw new Error('No response from server');
        }

        console.log('Server response:', response);

        if (response.success) {
            // Update local state based on the action that was actually performed
            if (response.action === 'reminder_set') {
                this.state.remindedMatches.add(matchId);
                this.showToast('Reminder set successfully! You will be notified before the match starts.');
            } else if (response.action === 'reminder_removed') {
                this.state.remindedMatches.delete(matchId);
                this.showToast('Reminder removed successfully');
            }

            // Update UI
            this.updateReminderButtons();
            
            console.log(`Match ${matchId} reminder ${response.action} successfully`);
        } else {
            this.showToast(response.message || 'Error updating reminder status');
        }
    } catch (error) {
        console.error('Error toggling reminder:', error);
        this.showToast('Server error. Please try again.');
    }
  }

  setupEventListeners() {
    // Filter functionality
    const sportFilter = document.getElementById('sportFilter');
    const leagueFilter = document.getElementById('leagueFilter');
    const statusFilter = document.getElementById('statusFilter');
    const resetFiltersBtn = document.getElementById('resetFiltersBtn');

    if (sportFilter) {
      sportFilter.addEventListener('change', (e) => {
        this.state.currentFilters.sport = e.target.value;
        this.filterMatches();
      });
    }

    if (leagueFilter) {
      leagueFilter.addEventListener('change', (e) => {
        this.state.currentFilters.league = e.target.value;
        this.filterMatches();
      });
    }

    if (statusFilter) {
      statusFilter.addEventListener('change', (e) => {
        this.state.currentFilters.status = e.target.value;
        this.filterMatches();
      });
    }

    if (resetFiltersBtn) {
      resetFiltersBtn.addEventListener('click', () => {
        this.resetFilters();
      });
    }

    // Attach event listeners to initial cards
    this.attachEventListenersToCards();
  }

  getMatchData(matchCard) {
    const sport = matchCard.dataset.sport;
    const teams = matchCard.querySelectorAll('.team-name');
    const competition = matchCard.querySelector('.match-competition').textContent;
    const venueElement = matchCard.querySelector('.match-venue');
    const timeElement = matchCard.querySelector('.match-time');
    
    // Extract venue from the venue element
    let venue = 'Unknown Venue';
    if (venueElement) {
      venue = venueElement.textContent.replace('üìç', '').trim();
    }
    
    // Extract time from the time element
    let time = new Date();
    if (timeElement) {
      // This is a simplified time extraction - you might want to enhance this
      const timeText = timeElement.textContent;
      if (timeText.includes('Today')) {
        time = new Date();
      } else if (timeText.includes('Tomorrow')) {
        time = new Date(Date.now() + 24 * 60 * 60 * 1000);
      }
    }
    
    return {
      sport: sport,
      homeTeam: teams[0].textContent,
      awayTeam: teams[1].textContent,
      league: competition.split('‚Ä¢')[0]?.trim() || 'Unknown League',
      venue: venue,
      time: time
    };
  }

  filterMatches() {
    this.renderScores();
  }

  resetFilters() {
    this.state.currentFilters = {
      sport: 'All',
      league: 'All',
      status: 'All'
    };
    
    const sportFilter = document.getElementById('sportFilter');
    const leagueFilter = document.getElementById('leagueFilter');
    const statusFilter = document.getElementById('statusFilter');
    
    if (sportFilter) sportFilter.value = 'All';
    if (leagueFilter) leagueFilter.value = 'All';
    if (statusFilter) statusFilter.value = 'All';
    
    this.filterMatches();
  }

  showToast(message) {
    const toast = document.getElementById('toast');
    if (!toast) return;
    
    toast.textContent = message;
    toast.classList.add('show');
    
    setTimeout(() => {
      toast.classList.remove('show');
    }, 3000);
  }
}

// Initialize the app when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
  console.log("Scores page loaded - Enhanced API version with Signout");
  window.scoresApp = new ScoresApp();
});
</script>
</body>
</html>